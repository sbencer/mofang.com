function Swipe(e,t){"use strict";function n(){g=b.children,y=g.length,g.length<2&&(t.continuous=!1),h.transitions&&t.continuous&&g.length<3&&(b.appendChild(g[0].cloneNode(!0)),b.appendChild(b.children[1].cloneNode(!0)),g=b.children),m=new Array(g.length),v=e.getBoundingClientRect().width||e.offsetWidth,b.style.width=g.length*v+"px";for(var n=g.length;n--;){var r=g[n];r.style.width=v+"px",r.setAttribute("data-index",n),h.transitions&&(r.style.left=n*-v+"px",s(n,x>n?-v:n>x?v:0,0))}t.continuous&&h.transitions&&(s(o(x-1),-v,0),s(o(x+1),v,0)),h.transitions||(b.style.left=x*-v+"px"),e.style.visibility="visible"}function r(){t.continuous?a(x-1):x&&a(x-1)}function i(){t.continuous?a(x+1):x<g.length-1&&a(x+1)}function o(e){return(g.length+e%g.length)%g.length}function a(e,n){if(x!=e){if(h.transitions){var r=Math.abs(x-e)/(x-e);if(t.continuous){var i=r;r=-m[o(e)]/v,r!==i&&(e=-r*g.length+e)}for(var a=Math.abs(x-e)-1;a--;)s(o((e>x?e:x)-a-1),v*r,0);e=o(e),s(x,v*r,n||w),s(e,0,n||w),t.continuous&&s(o(e-r),-(v*r),0)}else e=o(e),l(x*-v,e*-v,n||w);x=e,p(t.callback&&t.callback(x,g[x]))}}function s(e,t,n){u(e,t,n),m[e]=t}function u(e,t,n){var r=g[e],i=r&&r.style;i&&(i.webkitTransitionDuration=i.MozTransitionDuration=i.msTransitionDuration=i.OTransitionDuration=i.transitionDuration=n+"ms",i.webkitTransform="translate("+t+"px,0)"+"translateZ(0)",i.msTransform=i.MozTransform=i.OTransform="translateX("+t+"px)")}function l(e,n,r){if(!r)return b.style.left=n+"px",void 0;var i=+new Date,o=setInterval(function(){var a=+new Date-i;return a>r?(b.style.left=n+"px",N&&c(),t.transitionEnd&&t.transitionEnd.call(event,x,g[x]),clearInterval(o),void 0):(b.style.left=(n-e)*(Math.floor(100*(a/r))/100)+e+"px",void 0)},4)}function c(){T=setTimeout(i,N)}function d(){N=0,clearTimeout(T)}var f=function(){},p=function(e){setTimeout(e||f,0)},h={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(e){var t=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var n in t)if(void 0!==e.style[t[n]])return!0;return!1}(document.createElement("swipe"))};if(e){var g,m,v,y,b=e.children[0];t=t||{};var x=parseInt(t.startSlide,10)||0,w=t.speed||300;t.continuous=void 0!==t.continuous?t.continuous:!0;var T,E,N=t.auto||0,k={},C={},S={handleEvent:function(e){switch(e.type){case"touchstart":this.start(e);break;case"touchmove":this.move(e);break;case"touchend":p(this.end(e));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":p(this.transitionEnd(e));break;case"resize":p(n.call())}t.stopPropagation&&e.stopPropagation()},start:function(e){var t=e.touches[0];k={x:t.pageX,y:t.pageY,time:+new Date},E=void 0,C={},b.addEventListener("touchmove",this,!1),b.addEventListener("touchend",this,!1)},move:function(e){if(!(e.touches.length>1||e.scale&&1!==e.scale)){t.disableScroll&&e.preventDefault();var n=e.touches[0];C={x:n.pageX-k.x,y:n.pageY-k.y},"undefined"==typeof E&&(E=!!(E||Math.abs(C.x)<Math.abs(C.y))),E||(e.preventDefault(),d(),t.continuous?(u(o(x-1),C.x+m[o(x-1)],0),u(x,C.x+m[x],0),u(o(x+1),C.x+m[o(x+1)],0)):(C.x=C.x/(!x&&C.x>0||x==g.length-1&&C.x<0?Math.abs(C.x)/v+1:1),u(x-1,C.x+m[x-1],0),u(x,C.x+m[x],0),u(x+1,C.x+m[x+1],0)))}},end:function(){var e=+new Date-k.time,n=Number(e)<250&&Math.abs(C.x)>20||Math.abs(C.x)>v/2,r=!x&&C.x>0||x==g.length-1&&C.x<0;t.continuous&&(r=!1);var i=C.x<0;E||(n&&!r?(i?(t.continuous?(s(o(x-1),-v,0),s(o(x+2),v,0)):s(x-1,-v,0),s(x,m[x]-v,w),s(o(x+1),m[o(x+1)]-v,w),x=o(x+1)):(t.continuous?(s(o(x+1),v,0),s(o(x-2),-v,0)):s(x+1,v,0),s(x,m[x]+v,w),s(o(x-1),m[o(x-1)]+v,w),x=o(x-1)),t.callback&&t.callback(x,g[x])):t.continuous?(s(o(x-1),-v,w),s(x,0,w),s(o(x+1),v,w)):(s(x-1,-v,w),s(x,0,w),s(x+1,v,w))),b.removeEventListener("touchmove",S,!1),b.removeEventListener("touchend",S,!1)},transitionEnd:function(e){parseInt(e.target.getAttribute("data-index"),10)==x&&(N&&c(),t.transitionEnd&&t.transitionEnd.call(e,x,g[x]))}};return n(),N&&c(),h.addEventListener?(h.touch&&b.addEventListener("touchstart",S,!1),h.transitions&&(b.addEventListener("webkitTransitionEnd",S,!1),b.addEventListener("msTransitionEnd",S,!1),b.addEventListener("oTransitionEnd",S,!1),b.addEventListener("otransitionend",S,!1),b.addEventListener("transitionend",S,!1)),window.addEventListener("resize",S,!1)):window.onresize=function(){n()},{setup:function(){n()},slide:function(e,t){d(),a(e,t)},prev:function(){d(),r()},next:function(){d(),i()},getPos:function(){return x},getNumSlides:function(){return y},kill:function(){d(),b.style.width="auto",b.style.left=0;for(var e=g.length;e--;){var t=g[e];t.style.width="100%",t.style.left=0,h.transitions&&u(e,0,0)}h.addEventListener?(b.removeEventListener("touchstart",S,!1),b.removeEventListener("webkitTransitionEnd",S,!1),b.removeEventListener("msTransitionEnd",S,!1),b.removeEventListener("oTransitionEnd",S,!1),b.removeEventListener("otransitionend",S,!1),b.removeEventListener("transitionend",S,!1),window.removeEventListener("resize",S,!1)):window.onresize=null}}}}(window.jQuery||window.Zepto)&&function(e){e.fn.Swipe=function(t){return this.each(function(){e(this).data("Swipe",new Swipe(e(this)[0],t))})}}(window.jQuery||window.Zepto);