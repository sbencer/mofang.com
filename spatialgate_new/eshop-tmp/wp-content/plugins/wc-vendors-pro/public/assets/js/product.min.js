jQuery(function(e){function t(){var t=e("#product-type").val(),i=e("#_virtual").is(":checkbox")?e("input#_virtual:checked").size():e("#_virtual").val(),a=e("#_downloadable").is(":checkbox")?e("input#_downloadable:checked").size():e("#_downloadable").val(),n=".hide_if_downloadable, .hide_if_virtual",l=".show_if_downloadable, .show_if_virtual, .show_if_external";e.each(wcv_frontend_product.product_types,function(e,t){n=n+", .hide_if_"+t,l=l+", .show_if_"+t}),e(n).show(),e(l).hide(),a&&e(".show_if_downloadable").show(),i&&e(".show_if_virtual").show(),e(".show_if_"+t).show(),a&&e(".hide_if_downloadable").hide(),i&&e(".hide_if_virtual").hide(),"grouped"==t&&Ink.requireModules(["Ink.Dom.Selector_1","Ink.UI.Tabs_1"],function(e,t){var i=new t("#wcv-tabs");i.changeTab("#linked_product")}),e(".hide_if_"+t).hide(),e("input#_manage_stock").change()}function i(){var t,i,a=e(".wcv-featuredimg").data("title"),n=e(".wcv-featuredimg").data("button_text");return void 0!==t?void t.open():(t=wp.media({title:a,button:{text:n},multiple:!1}),t.on("select",function(){i=t.state().get("selection").first().toJSON(),0>e.trim(i.url.length)||(e(".wcv-featuredimg").append('<img src="'+i.sizes.thumbnail.url+'" alt="'+i.caption+'" title="'+i.title+'" style="max-width: 100%;" />'),e("#_featured_image_id").val(i.id),e(".wcv-media-uploader-featured-add").addClass("hidden"),e(".wcv-media-uploader-featured-delete").removeClass("hidden"))}),void t.open())}function a(){var t,i=e("#product_image_gallery"),a=e("#product_images_container ul.product_images"),l=i.val(),o=e(".wcv-media-uploader-gallery a");if(void 0!==t)return void t.open();if(t=wp.media.frames.product_gallery=wp.media({title:o.data("choose"),button:{text:o.data("update")},multiple:!0,states:[new wp.media.controller.Library({title:o.data("choose"),filterable:"all"})]}),t.on("select",function(){var e=t.state().get("selection");e.map(function(e){e=e.toJSON(),e.id&&(l=l?l+","+e.id:e.id,attachment_image=e.sizes.thumbnail?e.sizes.thumbnail.url:e.url,a.append('						<li class="wcv-gallery-image" data-attachment_id="'+e.id+'">							<img src="'+attachment_image+'" />							<ul class="actions">								<li><a href="#" class="delete" title="'+o.data("delete")+'"><i class="fa fa-times"></i></a></li>							</ul>						</li>'))}),i.val(l)}),n()){var d=e("#product_images_container").data("gallery_max_notice");alert(d)}else t.open()}function n(){var t=e(".wcv-gallery-image").length,i=e("#product_images_container").data("gallery_max_upload")-1;return t>i?!0:!1}function l(t,i){e(t).is(":checked")?(i.prop("disabled",!0),i.each(function(){e(this).is(":checkbox")?e(this).removeAttr("checked"):e(this).val("")})):i.prop("disabled",!1)}function o(){var t=e(".confirm_delete").data("confirm_text");confirm(t)}e("select#product-type").change(function(){var i=e(this).val();"variable"===i?(e("input#_manage_stock").change(),e("input#_downloadable").prop("checked",!1),e("input#_virtual").removeAttr("checked")):"grouped"===i?(e("input#_downloadable").prop("checked",!1),e("input#_virtual").removeAttr("checked")):"external"===i&&(e("input#_downloadable").prop("checked",!1),e("input#_virtual").removeAttr("checked")),t(),e("ul.wc-tabs li:visible").eq(0).find("a").click(),e("body").trigger("woocommerce-product-type-change",i,e(this))}).change(),e("input#_downloadable, input#_virtual").change(function(){t()}),e(".sale_price_dates_fields").each(function(){var t=!1;e(".sale_price_dates_fields").find("input").each(function(){""!=e(this).val()&&(t=!0)}),t?(e(".sale_schedule").hide(),e(".sale_price_dates_fields").show()):(e(".sale_schedule").show(),e(".sale_price_dates_fields").hide())}),e(".sale_schedule").on("click",function(){return e(".sale_price_dates_fields").show(),e(this).hide(),e(".cancel_sale_schedule").show(),!1}),e(".cancel_sale_schedule").on("click",function(){return e(".sale_price_dates_fields").hide(),e(this).hide(),e(".sale_schedule").show(),!1}),e("input#_manage_stock").change(function(){e(this).is(":checked")?e("div.stock_fields").show():e("div.stock_fields").hide()}).change(),e(".wcv-media-uploader-featured-delete").on("click",function(t){t.preventDefault(),e(".wcv-featuredimg").html(""),e(".wcv-media-uploader-featured-delete").addClass("hidden"),e(".wcv-media-uploader-featured-add").removeClass("hidden")}),e(".wcv-media-uploader-featured-add").on("click",function(e){return e.preventDefault(),i(),!1}),e("#product_images_container").on("click","a.delete",function(t){var i=e("#product_image_gallery");t.preventDefault(),e(this).closest("li.wcv-gallery-image").remove();var a="";return e("#product_images_container ul li.wcv-gallery-image").css("cursor","default").each(function(){var e=jQuery(this).attr("data-attachment_id");a=a+e+","}),i.val(a),e("#tiptip_holder").removeAttr("style"),e("#tiptip_arrow").removeAttr("style"),!1}),e(".wcv-media-uploader-gallery").on("click",function(e){return e.preventDefault(),a(),!1}),e("#files_download").on("click",".downloadable_files a.insert",function(){return e(this).closest(".downloadable_files").find("tbody").append(e(this).data("row")),!1}),e("#files_download").on("click",".downloadable_files a.delete",function(){return e(this).closest("tr").remove(),!1});var d,r;e(document).on("click",".upload_file_button",function(t){var i=e(this);if(r=i.closest("tr").find("td.file_url input"),t.preventDefault(),d)return void d.open();var a=[new wp.media.controller.Library({library:wp.media.query(),multiple:!0,title:i.data("choose"),priority:20,filterable:"uploaded"})];d=wp.media.frames.downloadable_file=wp.media({title:i.data("choose"),library:{type:""},button:{text:i.data("update")},multiple:!0,states:a}),d.on("select",function(){var e="",t=d.state().get("selection");t.map(function(t){t=t.toJSON(),t.url&&(e=t.url)}),r.val(e)}),d.on("ready",function(){d.uploader.options.uploader.params={type:"downloadable_product"}}),d.open()}),e(".downloadable_files tbody").sortable({items:"tr",cursor:"move",axis:"y",handle:"td.sort",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65}),e("#_shipping_fee_national_disable").change(function(){l(e(this),e(".wcv-disable-national-input"))}),e("#_shipping_fee_national_free").change(function(){l(e(this),e("#_shipping_fee_national"))}),e("#_shipping_fee_international_disable").change(function(){l(e(this),e(".wcv-disable-international-input"))}),e("#_shipping_fee_international_free").change(function(){l(e(this),e("#_shipping_fee_international"))}),e("#shipping").on("click",".wcv_shipping_rates a.insert",function(){return e(this).closest(".wcv_shipping_rates").find("tbody").append(e(this).data("row")),!1}),e("#shipping").on("click",".wcv_shipping_rates a.delete",function(){return e(this).closest("tr").remove(),!1}),e(".wcv_shipping_rates tbody").sortable({items:"tr",cursor:"move",axis:"y",handle:"td.sort",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65}),e(".select2").select2(),t(),l(e("#_shipping_fee_national_free"),e("#_shipping_fee_national")),l(e("#_shipping_fee_international_free"),e("#_shipping_fee_international")),l(e("#_shipping_fee_national_disable"),e(".wcv-disable-national-input")),l(e("#_shipping_fee_international_disable"),e(".wcv-disable-international-input")),e(".confirm_delete").on("click",function(){o()})});